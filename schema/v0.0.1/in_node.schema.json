{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "${{BASE_URL}}/schema/${{VERSION}}/in_node.schema.json",
  "title": "input_node_definition",
  "description": "Defines all the information an input haptic node can carry",
  "type": "object",
  "$defs": {
    "Size": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "type": { "const": "Sphere" },
            "radius": { "type": "number" }
          },
          "required": ["type", "radius"],
          "additionalProperties": false
        },
        {
          "type": "object",
          "description": "A capsule type collider has it's location at the center of the shape.",
          "properties": {
            "type": { "const": "Capsule" },
            "radius": { "type": "number" },
            "length": { "type": "number" },
            "rotation": {
              "description": "Quaternion rotation from Y+ upwards, and Z+ Forwards.",
              "type": "array",
              "items": { "type": "number" },
              "minItems": 4,
              "maxItems": 4
            }
          },
          "required": ["type", "radius", "length", "rotation"],
          "additionalProperties": false
        },
        {
          "type": "object",
          "description": "It is required to use the Global `interpolation_layer` as this will result in a 0 output value.",
          "properties": {
            "type": { "const": "Point" }
          },
          "required": ["type"],
          "additionalProperties": false
        }
      ]
    }
  },
  "properties": {
    "location": {
      "description": "Location of this node in the Manager's \"standard\" space",
      "type": "array",
      "prefixItems": [
        {
          "type": "number",
          "description": "The X postion, Unity Coordinate system."
        },
        {
          "type": "number",
          "description": "The Y postion, Unity Coordinate system."
        },
        {
          "type": "number",
          "description": "The Z postion, Unity Coordinate system."
        }
      ],
      "items": false
    },
    "interaction_tags": {
      "description": "What tags this node should interact with. Without tags, an input node WILL NOT output feedback",
      "type": "array",
      "items": {
        "$ref": "${{BASE_URL}}/schema/${{VERSION}}/node_group.schema.json"
      },
      "minItems": 1
    },
    "address": {
      "description": "Information describing which node is referenced. Note: This does not include platform additions like `/avatar/parameters/` for VRC's OSC address and will have to be added manually.",
      "type": "string"
    },
    "name": {
      "description": "A short recognizable name for this node. Very optional.",
      "type": "string"
    },
    "shape": {
      "description": "Describes the shape and size of the input node. Used for internal calculations like velocity, and for initializing nodes in game-integrations.",
      "$ref": "#/$defs/Size"
    },
    "interpolation_layer": {
      "description": "Internally, the seperate layers are calculated, then the non-zero results are averaged. `Limited` locks this input node to the nearest output and doesn't influence any others. `Default` exponentially weighs distance from the output. `Linear` Linearly scales outputs according to `size:radius`/node_distance. `Global` influences all nodes regardless of distance.",
      "enum": ["Limited", "Default", "Linear", "Global"]
    },
    "parent_bone": {
      "description": "Describes on which part of the human skeleton a "
    }
  }
}
